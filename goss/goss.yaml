# Import other goss.yaml files
gossfile:
  goss_az_checks.yaml: {}
  goss_k8s_checks.yaml: {}
  goss_model_checks.yaml: {}
  goss_network_checks.yaml: {}
  goss_pebble_checks.yaml: {}

command:
  # Grafana post-relation checks
  {{ if .Vars.enable_post_relation_tests }}
  grafana-related-dashboards:
    exec: bash goss/scripts/compare-dashboard-uids.sh {{ .Vars.model_name }} {{ .Vars.apps.k8s.grafana.name }} {{ .Vars.apps.k8s.alertmanager.name }}
    exit-status: 0
    stdout:
      have-patterns:
      - "Match found."
    stderr: ""
  {{ end }}
